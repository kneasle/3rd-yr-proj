<!DOCTYPE html>
<html style="margin: 0; width: 100%; height: 100%">
    <head>
        <title>Composing Program</title>
        <meta content="text/html;charset=utf-8" http-equiv="Content-Type"/>
        <script src="cookies.js"></script>
        <script src="colors.js"></script>
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <!-- Note the usage of `type=module` here as this is an ES6 module -->
        <script type="module">
            import { Comp, default as init } from './proj.js';

            async function run() {
                await init('./proj_bg.wasm');
                window.Comp = Comp;
                start();
            }
            run();
        </script>

        <!-- Main canvas -->
        <canvas id="comp-canvas"></canvas>

        <!-- Top-left HUD -->
        <div class="top-left-hud">
            <!-- Summary -->
            <p><span id="part-len">0</span> rows * <span
                id="num-parts">0</span> parts = <span id="num-rows">0</span> rows</p>
            <p><span id="falseness-info">true</span></p>

            <!-- Part Heads -->
            <hr/>
            <p><input id="part-head-input"></input></p>
            <p id="part-head-message" class="parse-err">Bell '2' repeated twice</p>
            <p>Viewing Part: <select name="part-head" id="part-head">
                <!-- The part heads are filled in only when the wasm is loaded, which is far enough
                     after page load to cause jank, so we fill this with a sensible default so that
                     hopefully the jank is less noticeable. -->
                <option value="0">#1: 12345678</option>
            </select></p>
        </div>

        <!-- Transpose box -->
        <div id="transpose-box">
            <p><input id="transpose-input"></input></p>
            <p id="transpose-message" class="parse-err">Bell '2' repeated twice</p>
        </div>

        <!-- Right sidebar -->
        <div id="right-sidebar">
            <div class="method-box">
                <h2 style="margin-top: 0; text-align: center;">TEMPORARY:</h2>

                <p id="method-readout">Bristol (B)</p>

                <p>Select meth: <input id="selected-method"
                    style="width: 2em;" type="number" value="0" min="0"></input>
                </p>
            </div>
        </div>

        <!-- Load the main JS script after the rest of the document has loaded.  We do this so that
             we can initialise references to the HTML elements as global constants for the JS code
             to re-use. -->
        <script src="index.js"></script>
    </body>
</html>
